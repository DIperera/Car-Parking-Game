<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Interactive Game</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        #container img {
          width: 100px;
          height: 50px;
        }
        #container {
            display: grid;
            grid-template-columns: 60px 60px;
            
            row-gap: 20px;
           margin-left: 5vw;
           margin-bottom: 5vw;
        }
        @media screen and (max-width: 600px) {
          #container{
            column-gap: 50%;
          }
        }
        @media screen and (min-width: 600px) {
          #container{
            column-gap: 70%;
          }
        }
        #container div {
            background-color: gray;
            width: 100px;
            height: 50px;
        }
        body {
            margin: 0;
            overflow: hidden;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        #box {
          width: 30px;
          height: 80px;
            background-color: lightblue;
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: center;
            transform: translate(-50%, -50%);
            border-radius: 30px;
        }
        #box img{
          width: 60px;
            height: 80px;
            z-index: 1000;
            transform: translateX(-15px);
            
        }
        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
        }
        button, input[type="checkbox"] {
            margin: 10px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
        }
        #score {
            position: fixed;
            top: 10px;
            left: 10px;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div id="gamediv">
        <div id="score">Score: 0</div>
        <div id="container">
            <div></div> 
            <div></div>
            <div id="car1"><img src="images/carpng.png" alt="1"></div>
            <div id="car2"><img src="images/carpng.png" alt="2"></div>
            <div id="car3"><img src="images/carpng.png" alt="3"></div>
            <div id="car4"><img src="images/carpng.png" alt="4"></div>
            <div id="car5"><img src="images/carpng.png" alt="5"></div>
            <div id="car6"><img src="images/carpng.png" alt="6"></div>
            <div id="car7"><img src="images/carpng.png" alt="7"></div>
            <div id="car8"><img src="images/carpng.png" alt="8"></div>
            <div id="car9"><img src="images/carpng.png" alt="9"></div>
            <div id="car10"><img src="images/carpng.png" alt="10"></div>
            <div></div>
            <div></div>
        </div>
        <div id="box"><img src="https://png.pngtree.com/png-vector/20220227/ourmid/pngtree-isolated-on-white-background-flat-style-top-view-of-a-yellow-sports-car-vector-png-image_26331738.png" alt=""></div>

        <!-- Controls to rotate and move the box -->
        <div class="controls">
            <button id="left">Left</button>
            <button id="right">Right</button>
            <label>
                <input type="checkbox" id="move"> Move
            </label>
        </div>
    </div>
    
    <script>
      const box = document.getElementById('box');
      const leftButton = document.getElementById('left');
      const rightButton = document.getElementById('right');
      const moveCheckbox = document.getElementById('move');
      const scoreDisplay = document.getElementById('score');
      const cars = document.getElementById("container").children;
      let hiddencar = null;
      let score = 0;
  
      // Function to randomly hide a car and set the target
      function removeCar() {
          if (hiddencar) {
              hiddencar.innerHTML = '<img src="images/carpng.png" alt="1">';
          }
          const position = Math.floor(Math.random() * 10) + 1;
          hiddencar = document.getElementById(`car${position}`);
          hiddencar.innerHTML = `<img src="https://th.bing.com/th/id/R.9e0f40a2190806747addd2971b639347?rik=6ZQV%2f20yd%2b20pA&riu=http%3a%2f%2fwww.pixelstalk.net%2fwp-content%2fuploads%2f2016%2f05%2fFantastic-HD-Black-Wallpapers.jpg&ehk=ieL0e5%2fH5LxQzuaX9QjOqNcueGl4CaXLDUx9YfKL3Ws%3d&risl=&pid=ImgRaw&r=0" alt="Hidden Car">`;
      }
  
      removeCar();
  
      let rotationDegree = 0;
      let boxPosition = { top: window.innerHeight / 2, left: window.innerWidth / 2 };
      let moveInterval;
  
      // Rotate the box left or right
      leftButton.addEventListener('click', () => {
          rotationDegree -= 15;
          updateBox();
      });
  
      rightButton.addEventListener('click', () => {
          rotationDegree += 15;
          updateBox();
      });
  
      function updateBox() {
          box.style.transform = `translate(-50%, -50%) rotate(${rotationDegree}deg)`;
          box.style.top = `${boxPosition.top}px`;
          box.style.left = `${boxPosition.left}px`;
      }
  
      function moveBox() {
          const radian = (rotationDegree * Math.PI) / 180;
          const speed = 5; // Movement speed
          boxPosition.left += Math.sin(radian) * speed;
          boxPosition.top -= Math.cos(radian) * speed;
          updateBox();
          checkCollision();
      }
  
      moveCheckbox.addEventListener('change', (event) => {
          if (event.target.checked) {
              moveInterval = setInterval(() => {
                  moveBox();
              }, 100);
          } else {
              clearInterval(moveInterval);
          }
      });
  
      function checkCollision() {
          const boxRect = box.getBoundingClientRect();
  
          // Check if the box goes outside the viewport
          if (
              boxRect.top < 0 || boxRect.left < 0 ||
              boxRect.bottom > window.innerHeight ||
              boxRect.right > window.innerWidth
          ) {
              alert('Game Over: Box went out of bounds!');
              resetGame();
          }
  
          // Check collision with cars
          for (const car of cars) {
              const carRect = car.getBoundingClientRect();
  
              // Skip hidden car
              if (car === hiddencar) continue;
  
              // Check collision with non-hidden cars
              if (
                  boxRect.left < carRect.right &&
                  boxRect.right > carRect.left &&
                  boxRect.top < carRect.bottom &&
                  boxRect.bottom > carRect.top
              ) {
                  
                  resetGame();
                  return;
              }
          }
  
          // Check if parked successfully in the hidden car
          const hiddenCarRect = hiddencar.getBoundingClientRect();
          if (
              boxRect.left >= hiddenCarRect.left &&
              boxRect.right <= hiddenCarRect.right &&
              boxRect.top >= hiddenCarRect.top &&
              boxRect.bottom <= hiddenCarRect.bottom
          ) {
              boxPosition = { top: window.innerHeight / 2, left: window.innerWidth / 2 };
              moveCheckbox.checked = false; // Uncheck the move checkbox
              clearInterval(moveInterval); // Stop the movement
              rotationDegree = 0; // Reset rotation
              updateBox();
              score++;
              scoreDisplay.textContent = `Score: ${score}`;
              alert(`Successfully parked the car !  Score:${score}`);
              removeCar(); 

          }
      }
  
      function resetGame() {
          clearInterval(moveInterval);
          location.reload();
      }
  </script>
  
</body>
</html>
